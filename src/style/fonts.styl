repo = {
    '0': 'https://raw.githubusercontent.com/kyle1an/SF-1/main',
		'1': 'https://cdn.jsdelivr.net/gh/kyle1an/SF-1@main',
		'2': 'https://cdn.jsdelivr.net/gh/kyle1an/SF-Fonts@master'
}

$link = repo['2'];
// @formatter:off
$generalUnicode = U+0000-024F, U+02B0-052F, U+1DC0-20CF, U+2190-22FF, U+2460-24FF, U+25A0-25FF, U+2700-27FF, U+2900-2BFF, U+2C60-2C7F, U+2DE0-2E7F, U+3200-32FF, U+A640-A69F, U+A700-A7FF, U+E000-F8FF, U+FFF0-FFFF, U+F0000-10FFFF;
$plusUnicode = U+0250-02AF, U+1D00-1DBF, U+2190-22FF;
$numUnicode = U+0030-0039;
// @formatter:on
$monoUnicode = $generalUnicode, $plusUnicode;
$monoFamilies = 'SF Mono' //, 'SFMono-Regular', 'Cascadia Mono-SemiLight', Consolas, Courier, 'courier new', 'DejaVu Sans Mono', docs-Consolas, Menlo, Meslo, Monaco, Monospace, monospaced, 'Roboto Mono', 'Source Code Pro', 'source-code-pro', 'SourceCodePro', 'PT Mono', Ubuntu Mono;
$compactFamilies = 'SF Compact Text' //, Mulish;
$textFamilies = 'SF Pro Text' //, 'SF Pro Display', Akzidenz, AlibabaPuHuiTi, 'Arial', arial, 'Arial Unicode MS', Arimo, Avenir, 'Benton Sans', 'Crisp Noto Sans Regular', Content-font, CustomSansSerif, 'dosis', font-regular, Geneva, Helvetica, 'Helvetica Neue', HelveticaNeue, HelveticaNowDisplay-Regular, 'Helvetica Neue For Number', 'HelveticaNeue-Medium', 'HelveticaNeue-Bold', Hind, Inter, 'Lantinghei SC', lato, 'Lucida Grande', muli, mwf-segoeui-web, Noto, 'Noto Sans', 'Noto Sans SC', 'Noto Sans TC', 'Open Sans', opensans, 'PingFang SC', '.PingFang SC', 'PingFangSC', 'PingFang SC Light', 'PingFangSC-Light', 'PingFangSC-Regular', 'PingFangSC-Medium', 'PingFangSC-Semibold', 'PingFang SC', 'pt sans', Roboto, Roboto-Light, Roboto-Regular, Roboto-Medium, sans-serif, 'Segoe UI Web (West European)', 'Segoe UI', SegoeUI, '-apple-system', 'Source Han Sans CN', 'source sans pro', system-ui, Tahoma, 'Times New Roman', 'Trebuchet MS', 'Ubuntu Light', Ubuntu, Verdana, 'wf_segoe-ui', Whitney, '方正仿宋_gbk', '宋体', '微軟正黑體', '微软雅黑', 'Hiragino Sans GB', 'Microsoft JhengHei', 'Microsoft Yahei';
$boldFamilies = 'Arial Black', HelveticaNowDisplay-XBd;
$boldWeights = { Semibold: 600, Bold: 700 };
$usualWeights = merge({ Light: 300, Regular: 400, Medium: 500 }, $boldWeights);
$allWeights = merge({ Thin: 200 }, $usualWeights);

$textFonts = {
  families: $textFamilies,
  weight: $allWeights,
  unicode: $generalUnicode,
  dir: '/Fonts/SF-Pro-Text-',
  src: @(dir, weight, style) {
    /* local('SF Pro Text '+ weight + (style == 'Italic'? ' Italic':''))  \, */
    local('-apple-system') \,src_url(dir, weight, style);
  }
};
$monoFonts = {
  families: $monoFamilies,
  weight: $usualWeights,
  unicode: $monoUnicode,
  dir: '/Fonts/SF-Mono-',
  src: @(dir, weight, style) {
    $fStyle = style == 'italic' ? ' Italic' : '';
    local('SF Mono ' + weight + $fStyle) \, src_url(dir, weight, style);
  }
};
$boldFonts = {
  families: $boldFamilies,
  weight: $boldWeights,
  unicode: $generalUnicode,
  dir: '/Fonts/SF-Pro-Text-',
  src: @(dir, weight, style) {
    src_url(dir, 'Bold', style);
  }
};
$compactFonts = {
  families: $compactFamilies,
  weight: $allWeights,
  unicode: $generalUnicode,
  dir: '/Fonts/SF-Compact-Text-',
  src: @(dir, weight, style) {
    fStyle = style == 'italic' ? ' Italic' : '';
    local('SF Compact Text ' + weight + fStyle) \, src_url(dir, weight, style);
  }
};

loadFonts(f) {
  srcFn = f.src;

  for familiy in f[families] {
    for weightName, weightNum in f[weight] {
      for style in normal italic {
        @font-face {
          font-family: familiy;
          src: srcFn(f[dir], weightName, style);
          unicode-range: f[unicode];
          font-weight: weightNum;
          font-style: style;
          font-display: swap;
        }
      }
    }
  }
}

src_url(dir, weight, style, ext = 'otf', format = 'OpenType') {
  i = style == 'italic' ? 'Italic':'';
  url($link + dir + weight + i + '.' + ext);
}

loadFonts($textFonts);
loadFonts($monoFonts);
loadFonts($compactFonts);

// @formatter:off
// U+2A700–2B73F, U+2B740–2B81F, U+2B820–2CEAF,
$zhUnicode = U+4E00-9FFF, U+3400-4DBF, U+20000-2A6DF, U+F900-FAFF, U+2F800-2FA1F;
// @formatter:on
$zhFamilies = '宋体', '微軟正黑體', '微软雅黑', 'Hiragino Sans GB', 'Microsoft JhengHei', 'Microsoft Yahei';
$zhFonts = {
  families: $zhFamilies,
  weight: $allWeights,
  unicode: $zhUnicode,
  dir: '/Fonts/SF-Pro-Text-'
};

@font-face {
  font-family: 'XcodeDigits';
  src: local('Xcode Digits Regular'), url('https://cdn.jsdelivr.net/gh/kyle1an/SF-Fonts@master/Fonts/XcodeDigits-regular.ttf');
  unicode-range: $numUnicode ;
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
